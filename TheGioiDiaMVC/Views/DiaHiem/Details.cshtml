@model TheGioiDiaMVC.ViewModels.ChiTietDiaHiemVM

@{
    ViewData["Title"] = "Thông tin bài đăng";
    Layout = "~/Views/Shared/_LayoutCustomer.cshtml";
}

<br />
<br />
<br />

<!-- Chi tiết sản phẩm -->
<div class="container-fluid py-5 mt-5">
    <div class="container py-5">
        <div class="row g-4 mb-5">
            <!-- Cột sản phẩm -->
            <div class="col-lg-8 col-xl-9">
                <div class="row g-4">
                    <div class="col-lg-6">
                        <div id="productCarousel" class="carousel slide border rounded overflow-hidden" data-bs-ride="carousel">
                            <div class="carousel-inner">
                                <!-- Ảnh 1 -->
                                <div class="carousel-item active">
                                    <img src="~/Hinh/HangHoa/@Model.HinhAnh"
                                         class="d-block w-100 rounded zoom-image"
                                         alt="Ảnh chính - @Model.TenDia"
                                         style="max-height: 500px; object-fit: cover;">
                                </div>
                                <!-- Ảnh 2 -->
                                <div class="carousel-item">
                                    <img src="~/Hinh/HangHoa/@Model.HinhMoTa"
                                         class="d-block w-100 rounded zoom-image"
                                         alt="Ảnh mô tả - @Model.TenDia"
                                         style="max-height: 500px; object-fit: cover;">
                                </div>
                            </div>
                            <!-- Nút điều hướng trái/phải -->
                            <button class="carousel-control-prev" type="button" data-bs-target="#productCarousel" data-bs-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#productCarousel" data-bs-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            </button>
                        </div>
                    </div>

                    <div class="col-lg-6">
                        <h4 class="fw-bold display-6" style="color: #D32F2F;">@Model.TenDia</h4>
                        <p class="mb-4"><strong>Ngày đăng:</strong> @Model.NgayGui.ToString("dd/MM/yyyy")</p>
                        <br />
                        <br />
                        <br />
                        <br />
                        <br />
                        <br />
                        <p class="text-muted fs-5">
                            <strong>Tình trạng:</strong><span class="badge
                                @(Model.TinhTrang == 0 ? "bg-success" :
                                  Model.TinhTrang == 1 ? "bg-warning text-dark" :
                                  Model.TinhTrang == 2 ? "bg-info" :
                                  "bg-secondary")">
                                @(Model.TinhTrang switch
                                {
                                    0 => "Mới",
                                    1 => "Đã qua sử dụng",
                                    2 => "Giá trị trưng bày",
                                    3 => "Không xác định"
                                })
                            </span>
                        </p>

                        <h1 class="text-black fw-bold"> @String.Format("{0:N0} VNĐ", Model.Gia)</h1>
                    </div>

                    <!-- Thông tin sản phẩm -->
                    <div class="col-lg-12">
                        <nav>
                            <div class="nav nav-tabs mb-3">
                                <button class="nav-link active border-white border-bottom-0"
                                        data-bs-toggle="tab" data-bs-target="#nav-about">
                                    Thông tin
                                </button>
                            </div>
                        </nav>
                        <div class="tab-content mb-5">
                            <div class="tab-pane active" id="nav-about">
                                <div class="product-detail">
                                    <h3>Chi tiết sản phẩm:</h3>
                                    <p>@Html.Raw(Model.MoTa.Replace("\n", "<br />"))</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Thông tin người bán -->
            <div class="col-lg-4 col-xl-3">
                <h3 class="fw-bold text-dark">Thông Tin Người Bán</h3>
                <p class="fs-5"><strong>🆔 Họ Tên:</strong> @Model.TenNguoiGui</p>
                <p class="fs-5"><strong>📧 Email:</strong> <a href="mailto:@Model.EmailNguoiGui" class="text-decoration-none">@Model.EmailNguoiGui</a></p>
                <p class="fs-5"><strong>📍 Địa chỉ:</strong> <a href="https://www.google.com/maps/search/?api=1&query=@Uri.EscapeDataString(Model.DiaChiNguoiGui)" class="text-decoration-none" target="_blank"> @Model.DiaChiNguoiGui</a></p>
                <p class="fs-5"><strong>📞 Số Điện Thoại:</strong> <a href="tel:@Model.SoDienThoaiNguoiGui" class="text-decoration-none">@Model.SoDienThoaiNguoiGui</a></p>
                <div class="mt-3">
                    <a href="tel:@Model.SoDienThoaiNguoiGui" class="btn btn-success btn-lg me-2">📞 Gọi ngay</a>
                    <a href="mailto:@Model.EmailNguoiGui" class="btn btn-primary btn-lg">✉ Nhắn tin</a>
                </div>
                <br />
                <br />
                <br />
                <br />
                <!-- Chia sẻ sản phẩm -->
                <div class="col-lg-12 mt-4">
                    <h4 class="fw-bold text-secondary">📢 Chia Sẻ Đĩa Này:</h4>
                    <a href="https://www.facebook.com/sharer/sharer.php?u=@Context.Request.Host@Context.Request.Path"
                       class="btn btn-outline-primary me-2 btn-lg" target="_blank">
                        🔵 Facebook
                    </a>
                    <a href="https://zalo.me/share?url=@Context.Request.Host@Context.Request.Path"
                       class="btn btn-outline-success btn-lg" target="_blank">
                        🟢 Zalo
                    </a>
                </div>
                <div class="col-lg-12">
                    <br />
                    <br />
                    <div class="position-relative">
                        <img src="~/Hinh/HangHoa/ban.png" class="img-fluid w-100 rounded" alt="">
                        <div class="position-absolute" style="top: 50%; right: 10px; transform: translateY(-50%);">
                            <h3 class="text-secondary fw-bold"> <br> Đăng tin rao CD ngay <br>Tại đây </h3>
                        </div>
                    </div>
                </div>
            </div>
            @if (ViewBag.SanPhamTuongTu != null && ViewBag.SanPhamTuongTu.Count > 0)
            {
                <div class="container-fluid py-5 bg-light">
                    <div class="container">
                        <h3 class="fw-bold text-success text-center mb-4">Sản Phẩm Tương Tự</h3>
                        <div class="row g-4">
                            @foreach (var item in ViewBag.SanPhamTuongTu)
                            {
                                <div class="col-md-6 col-lg-3 d-flex">
                                    <div class="card border rounded shadow-sm d-flex flex-column w-100 overflow-hidden product-card">
                                        <a asp-controller="DiaHiem" asp-action="Details" asp-route-id="@item.MaGuiDia" class="text-decoration-none">
                                            <img src="~/Hinh/HangHoa/@item.HinhAnh" class="card-img-top rounded-top" alt="@item.TenDia" style="height: 200px; object-fit: cover; transition: transform 0.3s;">
                                        </a>
                                        <div class="card-body text-center flex-grow-1">
                                            <h5 class="card-title text-dark text-truncate">@item.TenDia</h5>
                                            <p class="text-danger fw-bold mb-2">@String.Format("{0:N0} VNĐ", item.Gia)</p>
                                        </div>
                                        <div class="card-footer text-center bg-white">
                                            <a asp-controller="DiaHiem" asp-action="Details" asp-route-id="@item.MaGuiDia" class="btn btn-danger px-4">Mua Ngay</a>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            }

        </div>
    </div>
</div>


<style>
    .zoom-img {
        transition: transform 0.3s ease-in-out;
    }

        .zoom-img:hover {
            transform: scale(6);
        }
</style>